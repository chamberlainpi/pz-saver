var oe=Object.defineProperty,ne=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var q=(l,a,t)=>a in l?oe(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,K=(l,a)=>{for(var t in a||(a={}))le.call(a,t)&&q(l,t,a[t]);if(j)for(var t of j(a))re.call(a,t)&&q(l,t,a[t]);return l},W=(l,a)=>ne(l,ae(a));import{r as b,a as V,c as B,d as N,o as d,b as p,n as $,e as E,w as D,v as Y,u as o,f as e,i as ie,g as k,h as y,j as R,k as Z,l as J,F as G,m as z,p as P,_ as L,q as X,t as M,s as ce,x as ue,y as de,z as pe,A as me}from"./vendor.4d8b6bb4.js";const he=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const u of n)if(u.type==="childList")for(const i of u.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const u={};return n.integrity&&(u.integrity=n.integrity),n.referrerpolicy&&(u.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?u.credentials="include":n.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(n){if(n.ep)return;n.ep=!0;const u=t(n);fetch(n.href,u)}};he();globalThis.trace=console.log.bind(console);const ve=(l,a)=>{const t=b(l);async function s(){const{data:n}=await V.get(a);t.value=n[0]}return s(),t},_e=(l,a,t="modelValue")=>B({get:()=>l[t],set:s=>a(`update:${t}`,s)}),H=(l,a)=>N.duration((a||N()).diff(N(l))).format("D[d] HH:mm:ss [ago]").replace("0d ","");const fe={props:{name:String},setup(l){return(a,t)=>(d(),p("i",{class:$("fa fa-"+l.name)},null,2))}},be={class:"hbox items-center text-xs p-2 select-none cursor-pointer"},ge={key:0},xe={key:1,class:"abs right-2"},ye={props:{color:String,modelValue:Boolean},setup(l,{emit:a}){const s=_e(l,a);return(n,u)=>{const i=E("icon");return d(),p("label",be,[D(e("input",{type:"checkbox",class:"hidden","onUpdate:modelValue":u[0]||(u[0]=w=>ie(s)?s.value=w:null)},null,512),[[Y,o(s)]]),e("div",{class:$(["hbox items-center px-2 pt-1 w-14 h-7 rel rounded-full m-0 text-white leading-5",[o(s)?"bg-green-500":"bg-red-900"]])},[o(s)?k("",!0):(d(),p("i",ge,"OFF")),y(i,{name:"circle",class:$(["abs right-1 top-0 text-lg transition-all opacity-80",[o(s)?"-translate-x-7":""]])},null,8,["class"]),o(s)?(d(),p("i",xe,"ON")):k("",!0)],2)])}}},A=ve({pzRoot:""},"/config");async function we(){const{data:l}=await V.post("/config",A.value);return l}const ee=b({isBaselineSnapped:!1,isCurrentSnapped:!1});async function te(){let{data:l}=await V.get("/status");ee.value=l,setTimeout(te,3e3)}var Q;const x=b((Q=R.exports.cookies.isCompact)!=null?Q:!0);Z(x,l=>R.exports.cookies.isCompact=l);const Se={class:"game-folders panel"},ke={class:"hbox items-center gap-1 font-bold"},$e={class:"nowrap"},Ce=P("Folders"),Te={class:"hbox gap-1 shrink items-center mx-2"},Ae=e("i",{class:""},"Auto Set Current",-1),Pe={key:0,class:"ml-auto hbox flex-nowrap"},Ee=["disabled"],Me=P(" Refresh "),Ve={key:0,class:"hbox items-center w-full text-2xl px-2"},Re=e("i",{class:"font-bold"},"Filters:",-1),Be=["title"],Ne=["value"],Ue={class:"hbox all-center text-lg gap-2 px-2 py-1"},De=["onUpdate:modelValue"],Le={class:"flex-shrink hbox all-center"},Fe={key:0,class:"small-tag bg-green-600"},Oe=["title"],Ze={setup(l){var U;const a="All, Build:Builder, Surv:Survivor, Sand:Sandbox, YH1D:You Have One Day".split(", ").map(c=>{let[m,_]=c.split(":");return _||(_=m),{alias:m,fullname:_}}),t=b(R.exports.cookies.filter||"All"),s=b([]),n=B(()=>s.value.filter(c=>c.isSelected)),u=B(()=>n.value.length===1?n.value[0]:null),i=c=>A.value.current===c.path,w=()=>s.value.forEach(c=>c.isSelected=!1),C=b((U=R.exports.cookies.isAutoSetCurrent)!=null?U:!1),f=B(()=>{if(R.exports.cookies.filter=t.value,t.value==="All")return s.value;const c=`/${t.value}/`;return s.value.filter(m=>m.path.includes(c)&&(!x.value||i(m))).map(m=>(m.shorterPath=m.shortPath.split("/").pop(),m))});async function v(c){return A.value.current=c,await we()}async function g(){let{data:c}=await V.get("/load-game-folders");const m=N();return c=c.filter(_=>!_.path.includes("Multiplayer")).map(_=>W(K({},_),{shortPath:_.path.split("/Saves/").pop(),isSelected:!1,date:L.mapValues(_.stat,r=>N(r).format("YYYY-MM-DD HH:mm:ss")),ago:L.mapValues(_.stat,r=>H(r,m))})),c=L.sortBy(c,"stat.mtimeMs").reverse(),s.value=c,c}async function T(){const c=await g(),m=c[0].path;if(A.value.current!=m){const _=await v(c[0].path);trace("AUTO: NEW CURRENT GAME FOLDER ASSIGNED:",_)}C.value&&setTimeout(T,1e3*60*1)}return Z(C,c=>{if(R.exports.cookies.isAutoSetCurrent=c,c)return T()}),J(()=>{g(),te(),C.value&&T()}),(c,m)=>{const _=E("icon");return d(),p("div",Se,[e("div",ke,[e("h1",$e,[y(_,{name:"folder-open p-2"}),Ce]),e("label",Te,[D(e("input",{type:"checkbox",class:"rel scale-150 -top-1 btn","onUpdate:modelValue":m[0]||(m[0]=r=>C.value=r)},null,512),[[Y,C.value]]),Ae]),o(x)?k("",!0):(d(),p("div",Pe,[o(n).length?(d(),p("button",{key:0,class:"btn bg-red-600 text-white",onClick:w},[y(_,{name:"ban"})])):k("",!0),e("button",{class:$(["path-current btn bg-green-600 text-white",{"opacity-50":!o(u)}]),disabled:!o(u),onClick:m[1]||(m[1]=r=>v(o(n)[0].path))}," Set Current ",10,Ee),e("button",{class:"btn bg-orange-400 text-white",onClick:g},[y(_,{name:"sync"}),Me])]))]),o(x)?k("",!0):(d(),p("div",Ve,[Re,(d(!0),p(G,null,z(o(a),r=>(d(),p("label",{key:r,class:"px-2 btn nowrap",title:r.fullname},[D(e("input",{type:"radio",value:r.fullname,"onUpdate:modelValue":m[2]||(m[2]=h=>t.value=h)},null,8,Ne),[[X,t.value]]),P(" "+M(r.alias),1)],8,Be))),128))])),(d(!0),p(G,null,z(o(f),r=>(d(),p("div",{key:r.path},[e("label",Ue,[o(x)?k("",!0):D((d(),p("input",{key:0,type:"checkbox",class:"rel scale-150 -top-1 btn","onUpdate:modelValue":h=>r.isSelected=h},null,8,De)),[[Y,r.isSelected]]),e("i",Le,[e("i",{class:$({"text-green-600":i(r)})},M(t.value==="All"?r.shortPath:r.shorterPath),3),i(r)?(d(),p("i",Fe,"C")):k("",!0)]),e("i",{class:"ml-auto opacity-50 font-mono",title:r.date.mtimeMs},M(r.ago.mtimeMs),9,Oe)])]))),128))])}}},Ge={class:"timed-snapshot mt-3 panel border-red-600border border-red-500"},Ie={class:"hbox items-center pb-4"},ze={class:"mr-4"},Ye=P("Timed Snapshot"),He={class:"hbox items-center ml-auto"},je=P(" Auto-Start "),qe=e("i",{class:"b ml-3"},"Enabled",-1),Ke={class:"hbox border border-black rounded-md mb-2 p-1"},We={class:"hbox items-center text-xl"},Qe=e("i",{class:"mr-2"},"Every:",-1),Je=["value"],Xe={class:"hbox"},et=e("i",null,"SAVE PREVIOUS",-1),tt={class:"text-xs opacity-50 font-mono"},st=e("i",null,"SAVE RECENT",-1),ot={class:"text-xs opacity-50 font-mono"},nt=e("i",null,"SAVE INSTANTLY!",-1),at=e("i",{class:"text-xs opacity-50 mt-2 hbox items-center"},[e("b",{class:"fa fa-exclamation-triangle text-2xl mr-2"}),P(" Quit to MainMenu "),e("br"),P("or Exit Game first! ")],-1),lt=[nt,at],rt={key:0,class:"border-4 border-double border-red-600 p-2"},it={setup(l,{emit:a}){var _;var t=null;const s=b([]),n=b(!1),u=B(()=>s.value.length==2),i=b(!1),w=b((_=R.exports.cookies.isAutoStart)!=null?_:!1),C="2s 10s 30s 5m 20m 60m".split(" "),f=b("5m"),v=b(""),g=B(()=>ee.value.isPZRunning);Z(w,r=>(R.exports.cookies.isAutoStart=r,T(r))),Z(g,r=>T(r));const T=r=>w.value&&(i.value=r);Z(i,r=>{c()});const U={s:1,m:60};async function c(){if(!i.value){TweenMax.set("#progress",{width:"0%"}),t&&t.kill();return}const[r,h,F]=f.value.match(/([0-9]*)([a-z]*)/),I=h*U[F];n.value=!0,TweenMax.set("#progress",{width:"100%"});let{data:S}=await V.post("/buffer-snapshot");s.value=L.sortBy(S.pair,"dateZippedMS"),trace(s.value.map(O=>O.name).join(`
`)),n.value=!1,t=TweenMax.fromTo("#progress",I,{width:"0%"},{width:"100%",ease:O=>O,onComplete:c})}async function m(r){v.value="";let{data:h}=await V.post("/buffer-write-current",{which:r});if(h.isError){v.value=h.isError,setTimeout(()=>v.value="",3e3);return}trace("onSaveBuffer",h),a("save-buffer")}return ce(()=>{trace("Killing the tween..."),t&&t.kill()}),(r,h)=>{const F=E("icon"),I=E("ToggleButton");return d(),p("div",Ge,[e("div",Ie,[e("h1",ze,[y(F,{name:"camera p-2"}),Ye]),e("div",He,[e("i",{class:$(["b px-2 py-1 border rounded-md border-transparent transition-colors duration-200",{"border-green-500":o(g)}])},[je,y(F,{name:"circle",class:$([o(g)?"animate-pulse text-green-500":"text-gray-500 opacity-50"])},null,8,["class"])],2),y(I,{modelValue:w.value,"onUpdate:modelValue":h[0]||(h[0]=S=>w.value=S)},null,8,["modelValue"]),qe,y(I,{modelValue:i.value,"onUpdate:modelValue":h[1]||(h[1]=S=>i.value=S)},null,8,["modelValue"])])]),e("div",Ke,[e("div",{id:"progress",class:$(["h-3 rounded-md",n.value?"bg-yellow-400":"bg-green-600"])},null,2)]),e("div",We,[y(F,{name:"clock mr-1"}),Qe,(d(!0),p(G,null,z(o(C),S=>(d(),p("label",{key:S,class:$(["btn border-2 border-gray-400 px-3 py-1 rounded-xl text-white text-center mx-0 mr-1",f.value==S?"bg-green-500 border-green-200":"bg-blue-400 border-blue-200"])},[D(e("input",{type:"radio",class:"hidden",value:S,"onUpdate:modelValue":h[2]||(h[2]=O=>f.value=O)},null,8,Je),[[X,f.value]]),e("i",null,M(S),1)],2))),128))]),e("div",Xe,[e("button",{class:"btn w-full bg-red-900 text-white vbox all-center h-20",onClick:h[3]||(h[3]=S=>m("oldest")),title:"Create a ZIP based on the oldest snapshot."},[et,e("i",tt,M(o(u)?o(H)(s.value[0].dateZippedMS):"[--:--:--]"),1)]),e("button",{class:"btn w-full bg-yellow-700 text-white vbox all-center h-20",onClick:h[4]||(h[4]=S=>m("newest")),title:"Create a ZIP based on the newest snapshot."},[st,e("i",ot,M(o(u)?o(H)(s.value[1].dateZippedMS):"[--:--:--]"),1)]),e("button",{class:"btn w-full bg-green-900 text-white vbox all-center h-20",onClick:h[5]||(h[5]=S=>m("instantly")),title:"Create a new ZIP right now!"},lt)]),v.value?(d(),p("i",rt,M(v.value),1)):k("",!0)])}}},ct={class:"file-backups p-2 panel"},ut={class:"hbox items-center"},dt=P("Saved Snapshots"),pt={class:"break-words"},mt=["onClick"],ht={key:0,class:"ml-1"},vt=["onClick"],_t={key:0,class:"ml-1"},ft={setup(l,{expose:a}){const t=b(!1),s=b([]),n=B(()=>x.value?s.value.slice(s.value.length-3):s.value),u=f=>{const v=f.split("__").pop();return x.value?v.split(".")[0].replace("_"," "):v};async function i(){let{data:f}=await V.get("/backups");f.forEach(v=>v.cleanName=u(v.value)),s.value=L.sortBy(f,"cleanName")}async function w(f){if(t.value)return;t.value=!0;let{data:v}=await V.put("/backup-restore/"+f.key);trace(v),t.value=!1}async function C(f){if(t.value)return;t.value=!0;let{data:v}=await V.delete("/backup-delete/"+f.key);trace(v),await i(),t.value=!1}return a({updateBackupsList:i}),i(),(f,v)=>{const g=E("icon");return d(),p("div",ct,[e("div",ut,[e("h1",null,[y(g,{name:"camera p-2"}),dt])]),e("div",{class:$(["backup-list vbox border border-gray-300 rounded-md my-1",[o(x)?"text-md grid grid-cols-3 p-1":"p-3",{"opacity-50":t.value}]])},[(d(!0),p(G,null,z(o(n),T=>(d(),p("div",{key:T.key,class:"vbox all-center"},[e("i",pt,M(T.cleanName),1),e("div",{class:$(["backup-buttons text-2xl",{"ml-auto":!o(x)}])},[e("button",{class:$(["btn bg-blue-600 text-white p-3",{"sml-btn":o(x)}]),onClick:U=>w(T)},[y(g,{name:"trash-arrow-up"}),o(x)?k("",!0):(d(),p("i",ht,"Restore"))],10,mt),e("button",{class:$(["btn bg-red-600 text-white p-3",{"sml-btn":o(x)}]),onClick:U=>C(T)},[y(g,{name:"trash"}),o(x)?k("",!0):(d(),p("i",_t,"Delete"))],10,vt)],2)]))),128))],2)])}}},bt={icon:fe,PanelConfigGameFolders:Ze,PanelTimedSnapshot:it,PanelSavedSnapshots:ft,ToggleButton:ye};var gt={install(l,a){const t=[];L.forOwn(bt,(s,n)=>{l.component(n,s),t.push(n)}),trace("VUE - Registered: ",t.join(" "))}},xt="/assets/PzLogo.8f013a5d.png";function yt(l,a,t){const s={progress:0};TweenMax.to(s,a,{progress:1,onUpdate(){const{progress:n}=s;TweenMax.set(l,{rotation:Math.cos(n*20)*t*(1-n)})}})}const wt={class:"main-app vbox bg-gray-400 w-screen h-screen overflow-y-auto"},St=e("div",{class:"abs inset-0 scanlines from-transparent to-black opacity-30 z-0"},null,-1),kt={class:"rel w-72 h-32 self-center"},$t={class:"vbox rel z-10 bg-white bg-opacity-80"},Ct={class:"vbox p-4 gap-2"},Tt={class:"hbox nowrap"},At={key:0,class:"hbox items-center gap-2"},Pt=e("i",null,"PZ Root:",-1),Et=P(" Save "),Mt={key:1,class:"ml-auto"},Vt={setup(l){const a=b(null);b(null);const t=b(null),s=b(null);async function n(){!t||!t.value||await t.value.updateBackupsList()}return J(()=>{gsap.to(".scanlines",.45,{"--scanline-y":"5px",repeat:-1,ease:u=>u})}),(u,i)=>{const w=E("icon"),C=E("PanelTimedSnapshot"),f=E("PanelConfigGameFolders"),v=E("PanelSavedSnapshots");return d(),p("div",wt,[St,e("div",kt,[e("img",{class:"logo btn",alt:"PZ logo",src:xt,onClick:i[0]||(i[0]=g=>o(yt)(".logo",.5,10))})]),e("div",$t,[e("div",Ct,[e("div",Tt,[o(x)?k("",!0):(d(),p("div",At,[Pt,D(e("input",{class:"rounded-md p-2 shadow-inner shadow-gray-500 bg-opacity-70 bg-white w-full",type:"text","onUpdate:modelValue":i[1]||(i[1]=g=>o(A).pzRoot=g)},null,512),[[ue,o(A).pzRoot]]),e("button",{class:"btn bg-green-800 text-white w-48",onClick:i[2]||(i[2]=(...g)=>u.setConfig&&u.setConfig(...g))},[y(w,{name:"save mr-2"}),Et])])),o(A).pzRoot?(d(),p("div",Mt,[e("button",{class:"btn w-36 bg-gray-700 text-white",onClick:i[3]||(i[3]=g=>x.value=!o(x))},[y(w,{name:"gear"}),P(" "+M(o(x)?"Advanced":"Compact"),1)])])):k("",!0)]),o(A).pzRoot?(d(),p(G,{key:0},[y(C,{ref_key:"panelTimedSnapshot",ref:s,config:o(A),onSaveBuffer:n},null,8,["config"]),y(f,{ref_key:"panelConfigGameFolders",ref:a,config:o(A)},null,8,["config"]),y(v,{ref_key:"panelSavedSnapshots",ref:t},null,512)],64)):k("",!0)])])])}}};N.extend(de);N.extend(pe);const se=me(Vt);se.use(gt);se.mount("#app");
